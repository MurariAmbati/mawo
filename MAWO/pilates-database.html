<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAWO - Pilates Database | 35,000+ Core Strength & Control Workouts</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #ffe066;
            --primary-dark: #ffd600;
            --accent: #fffbe6;
            --bg: #fffbe6;
            --white: #fff;
            --gray: #888;
            --cube: #fffde7;
            --text: #222;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        .header {
            background: #ffe066;
            padding: 4rem 0 2rem 0;
            text-align: center;
            color: var(--text);
        }
        .header h1 {
            font-size: 3.2rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }
        .header p {
            font-size: 1.3rem;
            color: #bfa800;
            font-weight: 400;
        }
        .stats-bar {
            background: var(--accent);
            padding: 2.5rem 0 1.5rem 0;
            border-bottom: 1px solid #ffe066;
        }
        .stats-container {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2.5rem;
            text-align: center;
        }
        .stat-item {
            color: var(--text);
            transition: transform 0.3s;
        }
        .stat-item:hover { transform: translateY(-5px); }
        .stat-number {
            font-size: 2.3rem;
            font-weight: 700;
            color: #ffd600;
            margin-bottom: 0.3rem;
        }
        .stat-label {
            font-size: 1rem;
            color: #bfa800;
            font-weight: 500;
        }
        .main-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }
        .filters-section {
            width: 100vw;
            position: relative;
            left: 50%;
            right: 50%;
            margin-left: -50vw;
            margin-right: -50vw;
            background: #fffde7;
            padding: 2rem 0 1.5rem 0;
            margin-bottom: 2.5rem;
            border-radius: 0;
            box-shadow: 0 2px 12px rgba(255,224,102,0.08);
            border-bottom: 2px solid #ffe066;
        }
        .filters-grid {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }
        .filter-group { display: flex; flex-direction: column; }
        .filter-label {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #ffd600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .filter-select, .filter-input {
            padding: 0.75rem;
            border: 1px solid #ffe066;
            border-radius: 6px;
            font-size: 1rem;
            background: var(--white);
            color: var(--text);
            transition: all 0.3s;
        }
        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #ffd600;
            box-shadow: 0 0 0 3px rgba(255,224,102,0.08);
        }
        .search-section {
            max-width: 1100px;
            margin: 0 auto 2rem auto;
            display: flex;
            gap: 1rem;
        }
        .search-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #ffe066;
            border-radius: 6px;
            font-size: 1rem;
            background: var(--white);
            color: var(--text);
            transition: all 0.3s;
        }
        .search-input:focus {
            outline: none;
            border-color: #ffd600;
            box-shadow: 0 0 0 3px rgba(255,224,102,0.08);
        }
        .search-btn {
            padding: 0.75rem 1.5rem;
            background: #ffd600;
            color: var(--text);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255,224,102,0.15);
        }
        .workouts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        .workout-card {
            background: var(--white);
            border: 1px solid #ffe066;
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(255,224,102,0.10);
        }
        .workout-card:hover {
            border-color: #ffd600;
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(255,224,102,0.10);
        }
        .workout-header {
            background: #ffe066;
            padding: 1.5rem;
            border-bottom: 1px solid #ffe066;
        }
        .workout-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text);
        }
        .workout-category {
            font-size: 0.9rem;
            color: #bfa800;
            font-weight: 500;
        }
        .workout-body { padding: 1.5rem; }
        .workout-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #bfa800;
        }
        .workout-description {
            color: var(--gray);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .workout-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .tag {
            background: #ffd600;
            color: var(--text);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid #ffe066;
            transition: all 0.3s;
        }
        .tag:hover {
            background: #ffe066;
            color: var(--text);
        }
        .workout-actions { display: flex; gap: 0.5rem; }
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .btn-primary {
            background: #ffd600;
            color: var(--text);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255,224,102,0.15);
        }
        .btn-secondary {
            background: var(--white);
            color: var(--text);
            border: 1px solid #ffe066;
        }
        .btn-secondary:hover {
            background: #ffe066;
            transform: translateY(-2px);
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }
        .page-btn {
            padding: 0.75rem 1rem;
            border: 1px solid #ffe066;
            background: var(--white);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            color: var(--text);
        }
        .page-btn:hover {
            background: #ffd600;
            color: var(--text);
            transform: translateY(-2px);
        }
        .page-btn.active {
            background: #ffe066;
            color: var(--text);
            border-color: #ffe066;
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(255,224,102,0.85);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background-color: var(--white);
            margin: 2% auto;
            padding: 0;
            border-radius: 16px;
            width: 95%;
            max-width: 1400px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid #ffe066;
            box-shadow: 0 20px 60px rgba(255,224,102,0.2);
            animation: slideIn 0.3s ease;
            position: relative;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal-header {
            background: #ffe066;
            color: var(--text);
            padding: 2rem;
            border-radius: 16px 16px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ffe066;
        }
        .modal-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text);
            margin: 0;
            letter-spacing: -0.01em;
        }
        .close {
            font-size: 2.5rem;
            cursor: pointer;
            color: var(--text);
            line-height: 1;
            transition: all 0.3s ease;
            font-weight: 700;
            margin-left: 1.5rem;
        }
        .close:hover {
            color: #ffd600;
            transform: scale(1.1);
        }
        #modalContent {
            padding: 2rem;
        }
        @media (max-width: 900px) {
            .calendar-container { grid-template-columns: 1fr !important; }
            .calendar-grid { grid-template-columns: repeat(2, 1fr) !important; }
        }
        @media (max-width: 600px) {
            .calendar-grid { grid-template-columns: 1fr !important; }
            .modal-header { padding: 1rem; }
            .modal-title { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div class="fitprep-header" style="position:sticky;top:0;width:100%;background:linear-gradient(90deg,#1565c0 0%,#2196f3 100%);padding:1.1rem 0;z-index:1000;text-align:left;box-shadow:0 2px 10px rgba(33,150,243,0.08);">
        <a href="landing.html" class="fitprep-back-btn" style="color:#fff;font-weight:700;font-size:1.1rem;text-decoration:none;margin-left:2rem;transition:color 0.2s;">&larr; Back to FitPrep Home</a>
    </div>
    <div class="header">
        <h1>Pilates Database</h1>
        <p>35,000+ Pilates routines for core strength, body control, posture, and mind-body connection</p>
    </div>
    <div class="stats-bar">
        <div class="stats-container">
            <div class="stat-item"><span class="stat-number">35,000+</span><span class="stat-label">Workouts</span></div>
            <div class="stat-item"><span class="stat-number">Pilates</span><span class="stat-label">Type</span></div>
            <div class="stat-item"><span class="stat-number">All Levels</span><span class="stat-label">Levels</span></div>
            <div class="stat-item"><span class="stat-number">7</span><span class="stat-label">Days/Week</span></div>
        </div>
    </div>
    <div class="main-container">
        <div class="filters-section">
            <div class="search-section">
                <input type="text" id="searchInput" class="search-input" placeholder="Search Pilates workouts...">
                <button onclick="searchWorkouts()" class="search-btn">Search</button>
            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">Focus</label>
                    <select id="focusFilter" class="filter-select" onchange="filterWorkouts()">
                        <option value="">All Focus Areas</option>
                        <option value="Core Strength">Core Strength</option>
                        <option value="Body Control">Body Control</option>
                        <option value="Posture">Posture</option>
                        <option value="Mind-Body">Mind-Body</option>
                        <option value="Flexibility">Flexibility</option>
                        <option value="Balance">Balance</option>
                        <option value="Mobility">Mobility</option>
                        <option value="Reformer">Reformer</option>
                        <option value="Mat">Mat</option>
                        <option value="Props">Props</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Level</label>
                    <select id="levelFilter" class="filter-select" onchange="filterWorkouts()">
                        <option value="">All Levels</option>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                        <option value="Elite">Elite</option>
                        <option value="Pro">Pro</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Duration</label>
                    <select id="durationFilter" class="filter-select" onchange="filterWorkouts()">
                        <option value="">All Durations</option>
                        <option value="15-20 min">15-20 min</option>
                        <option value="20-30 min">20-30 min</option>
                        <option value="30-40 min">30-40 min</option>
                        <option value="40+ min">40+ min</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Equipment</label>
                    <select id="equipmentFilter" class="filter-select" onchange="filterWorkouts()">
                        <option value="">All</option>
                        <option value="Mat">Mat Only</option>
                        <option value="Reformer">Reformer</option>
                        <option value="Ring">Ring</option>
                        <option value="Ball">Ball</option>
                        <option value="Bands">Bands</option>
                        <option value="Weights">Weights</option>
                        <option value="Chair">Chair</option>
                        <option value="Foam Roller">Foam Roller</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="workoutsGrid" class="workouts-grid"></div>
        <div class="pagination" id="pagination"></div>
    </div>
    <!-- Modal, calendar, and JS logic will be added next -->
    <div id="workoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Workout Plan</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>
    <script>
        let allWorkouts = [];
        let filteredWorkouts = [];
        let currentPage = 1;
        const workoutsPerPage = 12;
        const totalWorkouts = 35000;
        // Helper data
        const focuses = [
            'Core Strength', 'Body Control', 'Posture', 'Mind-Body', 'Flexibility', 'Balance', 'Mobility', 'Reformer', 'Mat', 'Props'
        ];
        const levels = ['Beginner', 'Intermediate', 'Advanced', 'Elite', 'Pro'];
        const durations = ['15-20 min', '20-30 min', '30-40 min', '40+ min'];
        const equipmentList = ['Mat', 'Reformer', 'Ring', 'Ball', 'Bands', 'Weights', 'Chair', 'Foam Roller', 'Other'];
        const ages = ['All Ages', 'Teens', 'Adults', 'Seniors'];
        // Pilates exercise library
        const pilatesExercises = {
            'Mat': ['Hundred', 'Roll Up', 'Single Leg Circles', 'Rolling Like a Ball', 'Single Leg Stretch', 'Double Leg Stretch', 'Spine Stretch', 'Saw', 'Criss Cross', 'Teaser', 'Plank', 'Side Kick', 'Swimming', 'Leg Pull', 'Push Up'],
            'Reformer': ['Footwork', 'Long Stretch', 'Elephant', 'Knee Stretch', 'Short Box', 'Long Box', 'Stomach Massage', 'Running', 'Pelvic Lift', 'Jumpboard', 'Rowing', 'Pulling Straps', 'Mermaid', 'Side Splits'],
            'Props': ['Ring Squeeze', 'Ball Pass', 'Band Pull', 'Chair Step Up', 'Foam Roller Roll', 'Weighted Teaser', 'Balance Ball Plank', 'Mini Ball Bridge', 'Resistance Band Leg Lift'],
            'General': ['Bridge', 'Clamshell', 'Bird Dog', 'Side Plank', 'Scissors', 'Shoulder Bridge', 'Hip Circles', 'Oblique Twist', 'Tabletop Hold', 'Toe Taps', 'Chest Lift', 'Leg Pull Front', 'Spine Twist']
        };
        // Generate a single workout
        function generateWorkout(id) {
            const focus = focuses[Math.floor(Math.random() * focuses.length)];
            const level = levels[Math.floor(Math.random() * levels.length)];
            const duration = durations[Math.floor(Math.random() * durations.length)];
            const equipment = equipmentList[Math.floor(Math.random() * equipmentList.length)];
            const age = ages[Math.floor(Math.random() * ages.length)];
            const calories = 60 + Math.floor(Math.random() * 120);
            const title = `${focus} Pilates ${level} #${id}`;
            const description = `A ${duration} ${focus.toLowerCase()} Pilates routine for ${level.toLowerCase()}s. Focuses on ${focus.toLowerCase()}, posture, and mind-body connection. Equipment: ${equipment}.`;
            // Pick 4-7 exercises
            let exLib = pilatesExercises[equipment] || pilatesExercises['General'];
            let exercises = [];
            for (let i = 0; i < 4 + Math.floor(Math.random() * 4); i++) {
                const exName = exLib[i % exLib.length] || pilatesExercises['General'][i % pilatesExercises['General'].length];
                exercises.push({
                    name: exName,
                    sets: 2 + Math.floor(Math.random() * 3),
                    reps: 8 + Math.floor(Math.random() * 8),
                    duration: 2 + Math.floor(Math.random() * 4),
                    description: `${exName} for core, control, and posture.`
                });
            }
            // Weekly plan: 7 days, 5 workout, 2 rest
            const days = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
            let weeklyPlan = days.map((day, idx) => {
                if (idx === 2 || idx === 5) {
                    return { day, type: 'rest', description: 'Active recovery, stretching, or meditation.' };
                } else {
                    return { day, type: 'workout', description: `${focus} Pilates session`, exercises };
                }
            });
            return {
                id, title, focus, level, duration, equipment, age, calories, description, weeklyPlan
            };
        }
        // Generate all workouts (in batches for performance)
        function generateWorkouts(batch = 0, batchSize = 1000) {
            const start = batch * batchSize + 1;
            const end = Math.min(start + batchSize - 1, totalWorkouts);
            for (let i = start; i <= end; i++) {
                allWorkouts.push(generateWorkout(i));
            }
            if (end < totalWorkouts) {
                setTimeout(() => generateWorkouts(batch + 1, batchSize), 0);
            } else {
                filteredWorkouts = allWorkouts;
                displayWorkouts();
                displayPagination();
            }
        }
        // Filtering
        function filterWorkouts() {
            const focusFilter = document.getElementById('focusFilter').value;
            const levelFilter = document.getElementById('levelFilter').value;
            const durationFilter = document.getElementById('durationFilter').value;
            const equipmentFilter = document.getElementById('equipmentFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            filteredWorkouts = allWorkouts.filter(w => {
                const matchesFocus = !focusFilter || w.focus === focusFilter;
                const matchesLevel = !levelFilter || w.level === levelFilter;
                const matchesDuration = !durationFilter || w.duration === durationFilter;
                const matchesEquipment = !equipmentFilter || w.equipment === equipmentFilter;
                const matchesSearch = !searchTerm || w.title.toLowerCase().includes(searchTerm) || w.description.toLowerCase().includes(searchTerm);
                return matchesFocus && matchesLevel && matchesDuration && matchesEquipment && matchesSearch;
            });
            currentPage = 1;
            displayWorkouts();
            displayPagination();
        }
        function searchWorkouts() { filterWorkouts(); }
        // Display workouts
        function displayWorkouts() {
            const grid = document.getElementById('workoutsGrid');
            const startIndex = (currentPage - 1) * workoutsPerPage;
            const endIndex = startIndex + workoutsPerPage;
            const pageWorkouts = filteredWorkouts.slice(startIndex, endIndex);
            if (pageWorkouts.length === 0) {
                grid.innerHTML = '<div style="text-align:center;color:#bfa800;font-size:1.2rem;">No workouts found. Try adjusting filters.</div>';
                return;
            }
            grid.innerHTML = pageWorkouts.map(w => `
                <div class="workout-card" onclick="openWorkoutModal(${w.id})">
                    <div class="workout-header">
                        <div class="workout-title">${w.title}</div>
                        <div class="workout-category">${w.focus}</div>
                    </div>
                    <div class="workout-body">
                        <div class="workout-stats">
                            <span>Level: ${w.level}</span>
                            <span>Duration: ${w.duration}</span>
                            <span>Calories: ${w.calories}</span>
                        </div>
                        <div class="workout-description">${w.description}</div>
                        <div class="workout-tags">
                            <span class="tag">${w.equipment}</span>
                            <span class="tag">${w.focus}</span>
                            <span class="tag">${w.level}</span>
                        </div>
                        <div class="workout-actions">
                            <button class="btn btn-primary">Browse</button>
                            <button class="btn btn-secondary" onclick="event.stopPropagation(); downloadWorkout(${w.id})">Download</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        // Pagination
        function displayPagination() {
            const totalPages = Math.ceil(filteredWorkouts.length / workoutsPerPage);
            const pagination = document.getElementById('pagination');
            if (totalPages <= 1) { pagination.innerHTML = ''; return; }
            let paginationHTML = '';
            if (currentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage - 1})">Previous</button>`;
            }
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    paginationHTML += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    paginationHTML += `<span>...</span>`;
                }
            }
            if (currentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage + 1})">Next</button>`;
            }
            pagination.innerHTML = paginationHTML;
        }
        function changePage(page) {
            currentPage = page;
            displayWorkouts();
            displayPagination();
        }
        // Modal
        function openWorkoutModal(workoutId) {
            const w = allWorkouts.find(x => x.id === workoutId);
            if (!w) return;
            document.getElementById('modalTitle').textContent = w.title;
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="calendar-container" style="display:grid;grid-template-columns:1fr 2fr;gap:2rem;min-height:400px;">
                    <div style="background:#fffde7;padding:2rem;border-radius:12px;border:1px solid #ffe066;height:fit-content;">
                        <h3 style="color:#ffd600;">Workout Overview</h3>
                        <div style="margin-bottom:1rem;"><strong>Focus:</strong> ${w.focus}</div>
                        <div style="margin-bottom:1rem;"><strong>Level:</strong> ${w.level}</div>
                        <div style="margin-bottom:1rem;"><strong>Duration:</strong> ${w.duration}</div>
                        <div style="margin-bottom:1rem;"><strong>Equipment:</strong> ${w.equipment}</div>
                        <div style="margin-bottom:1rem;"><strong>Calories:</strong> ${w.calories}</div>
                        <div style="margin-bottom:1rem;"><strong>Description:</strong> ${w.description}</div>
                    </div>
                    <div class="calendar-grid" style="display:grid;grid-template-columns:repeat(7,1fr);gap:1rem;">
                        ${w.weeklyPlan.map(day => `
                            <div class="calendar-day ${day.type}" style="background:#fff;border:2px solid #ffe066;border-radius:12px;padding:1rem;min-height:120px;transition:all 0.3s;cursor:pointer;display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;position:relative;" onclick="showDayDetails('${day.day}',${w.id})">
                                <div class="day-header" style="font-weight:600;color:#ffd600;margin-bottom:0.5rem;font-size:0.9rem;text-align:center;">${day.day}</div>
                                <div class="day-type" style="font-size:0.75rem;color:#bfa800;margin-bottom:0.75rem;text-align:center;font-weight:500;text-transform:uppercase;">${day.type === 'workout' ? 'Training' : 'Rest'}</div>
                                <div class="day-exercises" style="font-size:0.7rem;color:#888;overflow:hidden;flex:1;display:flex;flex-direction:column;gap:0.4rem;">
                                    ${day.type === 'workout' && day.exercises ? 
                                        day.exercises.slice(0, 3).map(ex => `<div class='exercise-item'><strong>${ex.name}</strong> ${ex.sets}x${ex.reps}</div>`).join('') : 
                                        `<div class='rest-day-text' style='background:#fffbe6;color:#bfa800;padding:0.6rem;border-radius:6px;font-size:0.65rem;text-align:center;font-style:italic;border-left:3px solid #ffd600;'>Active Recovery</div>`
                                    }
                                    ${day.type === 'workout' && day.exercises && day.exercises.length > 3 ? 
                                        `<div class='exercise-item more-exercises' style='background:#fffbe6;color:#ffd600;font-style:italic;text-align:center;border-left:3px solid #ffd600;font-weight:500;'>+${day.exercises.length - 3} more</div>` : ''
                                    }
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div style='margin-top:2rem;'>
                    <h3 style='color:#ffd600;'>Weekly Exercise Breakdown</h3>
                    ${w.weeklyPlan.map(day => `
                        <div style='background:#fffbe6;padding:1.2rem;margin:1rem 0;border-radius:10px;border-left:4px solid #ffd600;'>
                            <h4 style='color:#bfa800;'>${day.day} - ${day.type === 'workout' ? 'Training' : 'Rest'}</h4>
                            <p><strong>Focus:</strong> ${day.description}</p>
                            ${day.type === 'workout' && day.exercises ? `
                                <ol style='margin-top:0.5rem;padding-left:1.5rem;'>
                                    ${day.exercises.map(ex => `<li><strong>${ex.name}</strong> - ${ex.sets} sets x ${ex.reps} reps (${ex.duration} min)</li>`).join('')}
                                </ol>
                            ` : `<p>Active recovery, stretching, or meditation.</p>`}
                        </div>
                    `).join('')}
                </div>
                <div class="download-options" style="display:flex;gap:1rem;margin-top:1.5rem;justify-content:center;">
                    <button class="btn btn-primary" onclick="downloadWorkout(${w.id})">Download Plan</button>
                    <button class="btn btn-secondary" onclick="downloadAllWorkouts()">Download All</button>
                </div>
            `;
            document.getElementById('workoutModal').style.display = 'block';
        }
        function showDayDetails(dayName, workoutId) {
            const w = allWorkouts.find(x => x.id === workoutId);
            const day = w.weeklyPlan.find(d => d.day === dayName);
            if (!day) return;
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="calendar-container">
                    <div style="background:#fffde7;padding:2rem;border-radius:12px;border:1px solid #ffe066;height:fit-content;">
                        <h3 style="color:#ffd600;">${dayName} - ${day.type === 'workout' ? 'Training' : 'Rest'}</h3>
                        <div style="margin-bottom:1rem;"><strong>Type:</strong> ${day.type === 'workout' ? 'Training' : 'Rest'}</div>
                        <div style="margin-bottom:1rem;"><strong>Description:</strong> ${day.description}</div>
                        ${day.type === 'workout' && day.exercises ? `<div style='margin-bottom:1rem;'><strong>Total Exercises:</strong> ${day.exercises.length}</div>` : ''}
                    </div>
                    <div style="grid-column:2;">
                        ${day.type === 'workout' && day.exercises ? `
                            <h3 style='color:#ffd600;'>Exercise Details</h3>
                            ${day.exercises.map((ex, idx) => `
                                <div class='exercise-item' style='margin-bottom:1rem;padding:1rem;background:#fff;border-radius:8px;border-left:3px solid #ffd600;'>
                                    <h4 style='color:#bfa800;margin-bottom:0.5rem;'>${idx + 1}. ${ex.name}</h4>
                                    <p><strong>Sets:</strong> ${ex.sets}</p>
                                    <p><strong>Reps:</strong> ${ex.reps}</p>
                                    <p><strong>Duration:</strong> ${ex.duration} min</p>
                                    <p><strong>Description:</strong> ${ex.description}</p>
                                </div>
                            `).join('')}
                        ` : `
                            <div class='exercise-item' style='padding:2rem;text-align:center;background:#fffbe6;border-radius:8px;'>
                                <h3 style='color:#bfa800;'>Rest Day</h3>
                                <p>${day.description}</p>
                                <p>Focus on recovery, stretching, and mind-body relaxation.</p>
                            </div>
                        `}
                    </div>
                </div>
                <div class="download-options" style="display:flex;gap:1rem;margin-top:1.5rem;justify-content:center;">
                    <button class="btn btn-primary" onclick="openWorkoutModal(${workoutId})">Back to Weekly Plan</button>
                    <button class="btn btn-secondary" onclick="downloadWorkout(${w.id})">Download Plan</button>
                </div>
            `;
        }
        function closeModal() {
            document.getElementById('workoutModal').style.display = 'none';
        }
        // Download
        function downloadWorkout(workoutId) {
            const w = allWorkouts.find(x => x.id === workoutId);
            if (!w) return;
            const content = `Pilates Workout Plan\n====================\n\nTitle: ${w.title}\nFocus: ${w.focus}\nLevel: ${w.level}\nDuration: ${w.duration}\nEquipment: ${w.equipment}\nCalories: ${w.calories}\n\nDescription: ${w.description}\n\n7-DAY WEEKLY PLAN\n=================\n\n${w.weeklyPlan.map(day => `\n${day.day.toUpperCase()}\nType: ${day.type === 'workout' ? 'Training' : 'Rest'}\nDescription: ${day.description}\n${day.type === 'workout' && day.exercises ? `Exercises:\n${day.exercises.map(ex => `- ${ex.name}: ${ex.sets}x${ex.reps} (${ex.duration} min)`).join('\n')}` : ''}\n`).join('')}\nNotes:\n- Focus on breath and control\n- Maintain good posture\n- Listen to your body\n- Consult a professional if new to Pilates`;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${w.title.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        function downloadAllWorkouts() {
            const csvContent = [
                ['ID','Title','Focus','Level','Duration','Equipment','Calories','Description'],
                ...filteredWorkouts.map(w => [w.id,w.title,w.focus,w.level,w.duration,w.equipment,w.calories,w.description])
            ].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'pilates_workouts.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('workoutModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
        // Initial batch (for instant display)
        generateWorkouts(0, 1000);
    </script>
</body>
</html> 